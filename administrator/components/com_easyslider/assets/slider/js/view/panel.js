void function(e,t,n,r){var i=0,s=[];t(window).on("resize scroll",function(){n(s).each(function(e){e._openned&&(e.$el.show(),e.open({direction:e.options.direction}))})}),e.ES_PanelView=B.View.extend({constructor:function(){n.bindAll(this,"open","close"),this.$bg=t('<div class="panel-background">'),this.options=n.defaults({},this.options,this.defaults),this._openned=!1,s.push(this),B.View.apply(this,arguments),this.close(),this.$el.on("click",".nav a",n.debounce(n.bind(function(){this.open()},this))),this.$el.on("click",n.bind(function(e){this.rootView&&this.rootView.colorPicker&&this!=this.rootView.colorPicker&&this.rootView.colorPicker.close()},this))},defaults:{direction:"top",background:!1,activeTarget:!1,sticky:!1},close:function(){this.$el.hide(),this.$bg.hide(),t(this.target).removeClass("active"),this._openned=!1,this.trigger("close")},open:function(e){this.target&&this.options.activeTarget&&t(this.target).removeClass("active");var e=this.options=n.extend({},this.options,e),r=this._openned,s=e.direction,o=e.activeTarget,u=e.background,a=e.sticky,f=this.target=e.target||this.target;this.trigger("before:open"),r||(u?this.$bg.css("z-index",i++).show().one("mousedown",n.bind(function(e){e.stopPropagation(),this.close()},this)):a||this.$el.clickOutside(this.close),this.$el.css("z-index",i++).show().before(this.$bg));if(f){o&&t(f).addClass("active");var l=s=="left"?"right-2":s=="right"?"left+2":s=="top"?"bottom-8":s=="bottom"?"top+8":"center";switch(s){case"top":case"bottom":var c="vertical",h="fit flip";break;case"left":case"right":var c="horizontal",h="flip fit";break;default:var c="fit",h="fit fit"}var p={my:l,at:s,of:f,collision:h,using:function(n,i){var s=i.element.element.position(),o=i.element.element.children(".es-panel-arrow");o.length||(o=t('<div class="es-panel-arrow">').appendTo(i.element.element)),o.removeClass("top left right bottom").hide(),i.element.element.css(n),i.element.element.height()>window.innerHeight&&(i.element.element.height("auto"),i.element.element.css("top","0px"),i.element.element.css("bottom","0px"));if(c=="fit")return;o.show().position({my:"center",at:"center",of:i.target.element});switch(c){case"vertical":var u=i.vertical;break;case"horizontal":var u=i.horizontal}o.addClass(u),e.animate&&r&&i.element.element.css(s).animate(n,"fast")}};this.within&&(p.within=this.within),this.$el.position(p)}return this._openned=!0,this.trigger("open"),this.trigger("after:open"),this}}),e.ES_InspectorView=ES_PanelView.extend({constructor:function(){ES_PanelView.apply(this,arguments)},inspect:function(e){return this.setBindingModel(e),this.models=e,this.trigger("inspect"),this},setAll:function(e,t){n(this.__dataBinding.models).invoke("set",e,t)}}),e.ES_ItemInspector=ES_InspectorView.extend({options:{direction:"bottom"},bindings:[{selector:".inspector-border-group",type:"disabled",attr:"style.border.borderStyleNotNone"}],events:{mousedown:function(e){this.rootView.animationInspector.close(),this.rootView.boxShadowInspector.close(),this.rootView.textShadowInspector.close(),this.rootView.fontsPicker._openned&&(this.fontName&&this.rootView.fontsPicker.trigger("select",this.fontName),this.rootView.fontsPicker.close())},"mousedown .fonts-select-btn .font-name":function(e){e.stopPropagation(),this.rootView.fontsPicker._openned||(this.fontName=this.$(".fonts-select-btn .font-name").val(),this.$(".fonts-select-btn .font-name").val(""),this.rootView.fontsPicker.regex="")},"mousedown .effect-select":function(e){e.stopPropagation()},"click .edit-animation-in-btn":function(e){var t=n(this.rootView.activeItems.where({selected:!0})).map(function(e){return e.get("animation.in")});this.rootView.animationInspector.open({target:e.currentTarget,direction:"right"}).inspect(t)},"click .edit-animation-out-btn":function(e){var t=n(this.rootView.activeItems.where({selected:!0})).map(function(e){return e.get("animation.out")});this.rootView.animationInspector.open({target:e.currentTarget,direction:"right"}).inspect(t)},"click .fonts-select-btn":function(e){!this.rootView.fontsPicker._openned&&this.rootView.fontsPicker.open({target:e.currentTarget,direction:"right",background:!1}).once("select",function(e){this.$(".fonts-select-btn .font-name").val(e).trigger("change")},this)},"click .select-item-image-btn":function(e){t.ES_MediaSelector(n.bind(function(e){this.setAll("style.background.image.src",e)},this))},"click .show-box-shadow-settings":function(e){var t=n(this.rootView.activeItems.where({selected:!0})).map(function(e){return e.get("style")});t&&n.each(t,function(e){e.get("box_shadows").length==0&&e.get("box_shadows").add({})}),this.rootView.boxShadowInspector.open({target:e.currentTarget,direction:"right"}).inspect(t),this.setShadow("box")},"click .show-text-shadow-settings":function(e){var t=n(this.rootView.activeItems.where({selected:!0})).map(function(e){return e.get("style")});t&&n.each(t,function(e){e.get("text_shadows").length==0&&e.get("text_shadows").add({})}),this.rootView.textShadowInspector.open({target:e.currentTarget,direction:"right"}).inspect(t),this.setShadow("text")},"keyup .fonts-select-btn .font-name":function(e){e.keyCode==13&&e.preventDefault();var t=this.$(".fonts-select-btn .font-name").val();this.rootView.fontsPicker.regex=t,this.$(".fonts-select-btn").trigger("click"),this.rootView.fontsPicker.open()}},initialize:function(){var e=this.$(".effect-select");n(ES_ANIMATIONS).each(function(r,i){var s=t("<optgroup>").attr("label",i).appendTo(e);n(r).each(function(e,n){t("<option>").attr("value",n).text(n).appendTo(s)},this)},this),this.on("open",n.debounce(this.toggleVisibility))},ready:function(){this.$tabs=this.$(".item-inspector-tabs > li > a").parent(),this.$commonTabs=this.$(".item-inspector-tabs > li > a[data-type-common]").parent(),this.$textTabs=this.$(".item-inspector-tabs > li > a[data-type-text]").parent(),this.$imageTabs=this.$(".item-inspector-tabs > li > a[data-type-image]").parent(),this.$videoTabs=this.$(".item-inspector-tabs > li > a[data-type-video]").parent(),this.$boxTabs=this.$(".item-inspector-tabs > li > a[data-type-box]").parent(),n(["change","add","remove"]).each(n.bind(function(e){this.listenTo(this.rootView.boxShadowInspector.shadowsView.collection,e,function(e){var t=e.collection;n(this.__dataBinding.models).each(function(e){e.get("style.box_shadows").reset([],{silent:!0}).set(t.toJSON())})})},this)),n(["change","add","remove"]).each(n.bind(function(e){this.listenTo(this.rootView.textShadowInspector.shadowsView.collection,e,function(e){var t=e.collection;n(this.__dataBinding.models).each(function(e){e.get("style.text_shadows").reset([],{silent:!0}).set(t.toJSON())})})},this))},getSelectedTypes:function(){return n(this.models).chain().map(function(e){return e.get("type")}).uniq().value()},toggleVisibility:function(){this.$tabs.addClass("hidden"),this.$commonTabs.removeClass("hidden");var e=this.getSelectedTypes();if(e.length!=1)return this;switch(e[0]){case"text":!this.$textTabs.add(this.$commonTabs).hasClass("active")&&this.showTab("text"),this.$textTabs.removeClass("hidden");break;case"image":!this.$imageTabs.add(this.$commonTabs).hasClass("active")&&this.showTab("image"),this.$imageTabs.removeClass("hidden");break;case"video":!this.$videoTabs.add(this.$commonTabs).hasClass("active")&&this.showTab("video"),this.$videoTabs.removeClass("hidden");break;case"box":!this.$boxTabs.add(this.$commonTabs).hasClass("active")&&this.showTab("style"),this.$boxTabs.removeClass("hidden")}},showTab:function(e,t){this.$('[aria-controls="item-inspector-'+e+'"]').tab("show"),t&&this.$("#item-inspector-"+e+" input").eq(0).focus()},setShadow:function(e){this.__dataBinding.models.length>1?(this.rootView.boxShadowInspector.$("em").show(),this.rootView.textShadowInspector.$("em").show()):(this.rootView.boxShadowInspector.$("em").hide(),this.rootView.textShadowInspector.$("em").hide());if(e=="box"){var t=this.__dataBinding.models[0].get("style.box_shadows");this.rootView.boxShadowInspector.shadowsView.collection.reset(t.toJSON())}else if(e=="text"){var t=this.__dataBinding.models[0].get("style.text_shadows");this.rootView.textShadowInspector.shadowsView.collection.reset(t.toJSON())}}}),e.ES_SettingsPanel=ES_InspectorView.extend({options:{background:!0},events:{},initialize:function(){this.on("open",function(){this.$el.position({my:"center",at:"center",of:this.rootView.el})})}}),e.ES_QuickSettingsPanel=ES_InspectorView.extend({options:{},events:{"click .slider-type-option-standard":function(){this.model.set("layout.type",1)},"click .slider-type-option-carousel":function(){this.model.set("layout.type",2)},"click .slider-layout-option-1":function(){console.log("auto width",this.model.get("layout.preset")),this.model.set("layout.preset","auto-width")},"click .slider-layout-option-2":function(){console.log("full width",this.model.get("layout.preset")),this.model.set("layout.preset","full-width")},"click .slider-layout-option-3":function(){this.model.set("layout.preset","full-screen")}},bindings:[{selector:".repeat-slider",type:"enabled",attr:"autoSlide.enable"},{selector:".slider-type-option-standard",type:"class",attr:{active:"layout.type"},parse:function(e){return parseInt(e)==1?!0:!1}},{selector:".slider-type-option-carousel",type:"class",attr:{active:"layout.type"},parse:function(e){return parseInt(e)==2?!0:!1}},{selector:".slider-layout-option-1",type:"class",attr:{active:"layout.preset"},parse:function(e){return e==="auto-width"?!0:!1}},{selector:".slider-layout-option-2",type:"class",attr:{active:"layout.preset"},parse:function(e){return e==="full-width"?!0:!1}},{selector:".slider-layout-option-3",type:"class",attr:{active:"layout.preset"},parse:function(e){return e==="full-screen"?!0:!1}}],initialize:function(){console.log("quick view ")}}),e.ES_AnimationInspector=ES_InspectorView.extend({options:{activeTarget:!0},events:{"click .edit-transform-btn,.back-to-edit-basic-btn":function(){this.$(".basic-edit-panel,.transform-edit-panel").toggleClass("hidden"),this.open()}},initialize:function(){var e=this.$(".effect-select");n(ES_ANIMATIONS).each(function(r,i){var s=t("<optgroup>").attr("label",i).appendTo(e);n(r).each(function(e,n){t("<option>").attr("value",n).text(n).appendTo(s)},this)},this)}}),e.ES_CustomCSSEditor=ES_PanelView.extend({options:{background:!1,sticky:!0},events:{mousedown:function(){if(this.$el.is(".es-panel-focus"))return;this.rootView.$(".es-panel-focus").removeClass("es-panel-focus"),this.$el.addClass("es-panel-focus")},"click .save-editor-btn":function(){this.$input.trigger("change"),this.close()},"click .close-editor-btn":function(){this.$input.val(this.model.get("custom_js")),this.close()}},initialize:function(){var e=this;e.$el.draggable({handle:".panel-heading"}),e.$input=this.$("input.editor-input"),e.once("open",function(){e.editor=CodeMirror(e.$(".es-editor").get(0),{mode:"css",value:e.$input.val(),lineNumbers:!0,autoCloseBrackets:!0}),e.editor.on("change",function(){e.$input.val(e.editor.getValue())}),e.editor.setSize(600,350),e.editor.refresh(),e.$el.position({my:"center",at:"center",of:"body"}).trigger("mousedown")})}}),e.ES_CustomJSEditor=ES_PanelView.extend({options:{background:!1,sticky:!0},events:{mousedown:function(){if(this.$el.is(".es-panel-focus"))return;this.rootView.$(".es-panel-focus").removeClass("es-panel-focus"),this.$el.addClass("es-panel-focus")},"click .save-editor-btn":function(){this.$input.trigger("change"),this.close()},"click .close-editor-btn":function(){this.$input.val(this.model.get("custom_js")),this.close()}},initialize:function(){var e=this;e.$el.draggable({handle:".panel-heading"}),e.$input=this.$("input.editor-input"),e.once("open",function(){e.editor=CodeMirror(e.$(".es-editor").get(0),{mode:"javascript",value:e.$input.val(),lineNumbers:!0,autoCloseBrackets:!0,extraKeys:{},mode:{name:"javascript",globalVars:!0}}),e.editor.on("change",function(){e.$input.val(e.editor.getValue())}),e.editor.setSize(600,350),e.editor.refresh(),e.$el.position({my:"center",at:"center",of:"body"}).trigger("mousedown")}),u=e}}),e.ES_Tooltip=ES_PanelView.extend({options:{background:!1,sticky:!1},events:{},initialize:function(){this.on("before:open",function(){if(!this.options.target)return;var e=t(this.options.target),n=e.data("title");typeof n=="undefined"&&(n=e.attr("title"),e.removeAttr("title")),e.data("title",n),this.$(".content").text(n||"")})}}),e.quickTourView=ES_PanelView.extend({events:{},initialize:function(){var e=this;this.on("before:open",function(){this.options=this.options||{},this.options.target||(this.options.target=t(this.$el.attr("data-target")).get(0)),this.options.direction=this.$el.attr("data-direction")}),this.on("after:open",function(){t(t(this.$el.attr("data-target")).get(0)).is(":visible")||e.close()})},ready:function(){}}),e.ES_QuickTours=B.View.extend({events:{click:"close"},initialize:function(){var e=this;this.$(".quick-tour-panel").each(function(t,n){var r=e.appendView(new quickTourView({el:n}))})},ready:function(){},open:function(){var e=this;this.$el.show(),n(e.subViews).invoke("open"),t(window).trigger("resize")},close:function(){this.$el.hide()}}),e.ES_BoxShadowInspector=ES_InspectorView.extend({options:{activeTarget:!0},views:{"shadowsView > #box-shadows":B.CollectionView.extend({itemView:B.View.extend({events:{"click .remove-box-shadow-btn":function(){this.model.collection.remove(this.model),this.remove()}}})})},events:{"click .add-box-shadow-btn":function(){this.shadowsView.collection.add({})}},ready:function(){this.shadowsView.setCollection(new ES_Item_Style.prototype.relations.box_shadows),aaa=this}}),e.ES_TextShadowInspector=ES_InspectorView.extend({options:{activeTarget:!0},views:{"shadowsView > #text-shadows":B.CollectionView.extend({itemView:B.View.extend({events:{"click .remove-text-shadow-btn":function(){this.model.collection.remove(this.model),this.remove()}}})})},events:{"click .add-text-shadow-btn":function(){this.shadowsView.collection.add({})}},ready:function(){this.shadowsView.setCollection(new ES_Item_Style.prototype.relations.box_shadows),aaa=this}})}(this,jQuery,_,JSNES_Backbone);