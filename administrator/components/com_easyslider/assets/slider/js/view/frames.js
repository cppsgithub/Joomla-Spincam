void function(e,t,n,r){var i=e.ES_FrameView=B.View.extend({constructor:function(){n.bindAll(this,"update","savePosition"),B.View.apply(this,arguments)},ready:function(){this.$wrapper=this.$(".time-blocks"),this.$inOut=this.$(".animation-in,.animation-out"),this.$in=this.$(".animation-in"),this.$out=this.$(".animation-out"),this.$wait=this.$(".animation-wait"),this.$inOut.resizable({handles:"w,e",minWidth:0,distance:1}).draggable({axis:"x",snap:".guide-block",snapTolerance:5}),this.$wait.draggable({axis:"x",snap:".guide-block",snapTolerance:5}),this.update(),this.checkSelected(),this.listenTo(this.model,"change:selected",this.checkSelected)},events:{"mousedown .time-block":function(e){e.preventDefault()},resizestart:function(e,n){var r=this.$in.position(),i=this.$out.position(),s=this.$in.width(),o=this.$out.width();t(e.originalEvent.target).is(".ui-resizable-w")?(this.$out.resizable("option","maxWidth",o+i.left-(s+r.left)),this.resizeHandle="w"):(this.$out.resizable("option","maxWidth",!1),this.resizeHandle="e")},"resize .animation-in,.animation-out":function(e,t){var n=this.$in.position(),r=this.$out.position(),i=this.$in.width(),s=this.$out.width();t.position.left<0&&this.resizeHandle=="e"&&(t.size.width+=t.position.left,t.position.left=0),t.size.width<0&&this.resizeHandle=="w"&&(t.position.left+=t.size.width,t.size.width=0),t.helper.is(".animation-in")&&t.position.left>r.left&&(t.size.width=0,t.position.left=r.left),this.debounceUpdate()},"drag .animation-in,.animation-out":function(e,t){var n=this.$in.position(),r=this.$out.position(),i=this.$in.width(),s=this.$out.width();t.helper.is(".animation-out")&&t.position.left<n.left+i&&(t.position.left=n.left+i),t.helper.is(".animation-in")&&t.position.left+i>r.left&&(t.position.left=r.left-i),t.position.left<0&&(t.position.left=0),this.debounceUpdate()},"drag .animation-wait":function(e,t){t.position.left<0&&(t.position.left=0),this.$in.css("left",t.position.left),this.$out.css("left",t.position.left+this.$wait.width())},dragstop:"debounceSave",resizestop:"debounceSave",mousedown:function(e){e.stopPropagation(),!this.model.get("selected")&&this.model.collection.invoke("set","selected",!1),this.model.set("selected",!0),this.rootView.itemInspector.showTab("animation")}},modelEvents:{"change:animation.in.delay":"debounceUpdate","change:animation.in.duration":"debounceUpdate","change:animation.out.delay":"debounceUpdate","change:animation.out.duration":"debounceUpdate"},bindings:[{selector:".animation-in",type:"style",attr:{left:"animation.in",width:"animation.in"},parse:function(e,t){switch(t){case"left":return e.delay/10+"px";case"width":return e.duration/10+"px"}}},{selector:".animation-out",type:"style",attr:{left:"animation.out",width:"animation.out"},parse:function(e,t){switch(t){case"left":return e.delay/10+"px";case"width":return e.duration/10+"px"}}}],checkSelected:function(){this.model.get("selected")?this.$el.addClass("selected"):this.$el.removeClass("selected")},debounceUpdate:function(){requestAnimationFrame(this.update)},debounceSave:function(){requestAnimationFrame(this.savePosition)},update:function(){var e=this.$in.position(),t=this.$out.position(),n=e.left,r=t.left-e.left;this.$wait.css({left:n,width:r}),this.$in.resizable("option","maxWidth",t.left-e.left)},savePosition:function(){var e=Math.round(this.$in.position().left/1)*10,t=Math.round(this.$in.width()/1)*10,n=Math.round(this.$out.position().left/1)*10,r=Math.round(this.$out.width()/1)*10;this.model.set({animation:{out:{delay:n,duration:r},"in":{delay:e,duration:t}}})}}),s=e.ES_FramesView=B.CollectionView.extend({constructor:function(){B.CollectionView.apply(this,arguments)},initialize:function(){this.on("set:collection",function(e){this.listenTo(e,"remove",this.reset)})},itemView:i,_reverseOrder:!0,events:{scroll:function(e){this.rootView.timelineView.$slider.get(0).scrollLeft=this.el.scrollLeft,this.rootView.layersView.el.scrollTop=this.el.scrollTop,this.rootView.timelineView.$guide.css("transform","translateX("+ -this.el.scrollLeft+"px)")}}})}(this,jQuery,_,JSNES_Backbone);