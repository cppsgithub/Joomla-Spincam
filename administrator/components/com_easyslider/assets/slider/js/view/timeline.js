void function(e,t,n,r){var i=e.ES_TimelineView=B.View.extend({constructor:function(){B.View.apply(this,arguments)},bindings:[{selector:".timeline-block.duration,.guide-block.duration",type:"style",attr:{width:"duration"},parse:function(e,t){switch(t){case"width":return e/10;default:return e}}},{selector:".timeline-block .txt-duration",type:"text",attr:"duration",parse:function(e){return e+"ms"}}],events:{"click .timeline-preview-btn":function(){this.rootView.startAnimationPreview()},"click .timeline-resume-btn":function(){this.rootView.resumeAnimationPreview()},"click .timeline-pause-btn":function(){this.rootView.pauseAnimationPreview()},"click .timeline-preview-exit-btn":function(){this.rootView.stopAnimationPreview()},"resizestart .timeline-block.duration":function(e,t){this.rootView.slideAnim.seek(0)},"resize .timeline-block.duration":function(e,t){this.$(".guide-block.duration").width(t.size.width),this.$(".timeline-block.duration .txt-duration").text(t.size.width*10+"ms")},"resizestop .timeline-block.duration":function(e,t){var n=t.size.width,r=n*10;this.model.set("duration",r)},"resize .timeline-toolbar":function(e,t){this.rootView.layersView.$el.width(t.size.width),this.$(".timeline-guide").css("left",t.size.width)},"drag .timeline-cursor":function(e,t){var n=this.model.get("totalDuration")/10+20;t.position.left<20?t.position.left=20:t.position.left>n&&(t.position.left=n);var r=(t.position.left-20)*10;this.rootView.slideAnim.seek(r)},"dragstart .timeline-cursor":function(e,t){this.isDraggingCursor=!0,this.rootView.enterAnimationPreview(),this.rootView.pauseAnimationPreview()},"dragstop .timeline-cursor":function(e,t){this.isDraggingCursor=!1}},modelEvents:{"change:duration":function(e){this.rootView.slideAnim.duration=e.get("totalDuration")}},initialize:function(){this.isDraggingCursor=!1,this.$toolbar=this.$(".timeline-toolbar"),this.$slider=this.$(".timeline-slider"),this.$guide=this.$(".timeline-guide .guide-block"),this.$txt_msec=this.$(".timeline-time .txt-ms"),this.$txt_sec=this.$(".timeline-time .txt-sec"),this.$txt_min=this.$(".timeline-time .txt-min"),this.$cursor=this.$(".timeline-cursor"),this.listenTo(this.rootView.slideAnim,"tick",this.handleAnimationTick),this.listenTo(this.rootView.slideAnim,"end",this.handleAnimationTick),this.$toolbar.resizable({handles:"e",minWidth:180}),this.$(".timeline-block.duration").resizable({handles:"e",grid:[10,0],minWidth:100}).children(".ui-resizable-handle").attr("title","Drag me to change duration."),this.$(".timeline-block.transition-in").resizable({handles:"e",grid:[10,0],minWidth:0}),this.$cursor.draggable({axis:"x"}),this.renderRuler()},ready:function(){this.renderRuler()},handleAnimationTick:function(e){e!==undefined||(e=this.rootView.slideAnim.duration);if(!this.isDraggingCursor){var t=Math.round(e/10)+20;this.$cursor.css("left",t)}var n=(e%1e3).toString(),r=Math.floor(e/1e3).toString();while(n.length<3)n="0"+n;while(r.length<2)r="0"+r;this.$txt_msec.text(n),this.$txt_sec.text(r)},renderRuler:function(){if(this._isRenderRuler)return;var e=9e3,n=this.$(".jsn-es-ruler").height(),r=5e3,i=0,s=10,o="#6F737D",u=t("<svg>");u.attr("width",e).attr("height",n).attr("class",this.$(".jsn-es-ruler").attr("class"));var a=i;while(a>=0&&a<=e+s)a%(s*5)==0&&t('<text class="'+(a==0?"":"ruler-number ruler-number-top")+'">').text((a/s/10).toFixed(1)).attr({y:n-5,x:a+2,fill:o}).appendTo(u),t('<line class="timeline-line">').appendTo(u).attr({x1:a-.5,x2:a-.5,y1:0,y2:a%(s*5)==0?n-20:(n-20)/2,stroke:o}).css({opacity:a==1,"stroke-width":"1px"}),a+=s;this._isRenderRuler=!0,this.$(".jsn-es-ruler").remove(),this.$(".timeline-slider").prepend(u.get(0).outerHTML)}})}(this,jQuery,_,JSNES_Backbone);